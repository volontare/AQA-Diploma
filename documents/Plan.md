# **План автоматизации тестирования веб-cервиса покупки тура, взаимодействующего с СУБД и API Банка**


## **1. Перечень автоматизируемых сценариев**
**Важно:** для выполнения всех сценариев (как позитивных, так и негативных) необходимо открыть главную страницу сервиса http://localhost:8080/

**Основная задача:** 
тестирование покупки тура двумя способами:
* оплата по дебетовой карте
* выдача кредита по данным банковской карты

---
## *UI-тестирование*

---

__Happy Path (позитивные сценарии)__

---

**1. Покупка тура дебетовой картой**

При выполнении данных тестов необходимо нажать на кнопку "Купить"

---

**Успешная покупка тура картой со статусом APPROVED**

1. В поле "Номер карты" ввести номер карты со статусом APPROVED 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova) 	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат**: в правом верхнем углу должно появиться сообщение "Успешно Операция одобрена банком"

---

**Отказ в покупке тура при оплате картой со статусом DECLINED**

1. В поле "Номер карты" ввести номер карты со статусом DECLINED 4444 4444 4444 4442
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 11)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 24)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 523)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат**: в правом верхнем углу должно появиться сообщение "Ошибка! Банк отказал в проведении операции"

---

**2. Покупка тура с использованием кредитных средств**

При выполнении данных тестов необходимо нажать на кнопку "Купить в кредит"

---

**Успешная покупка тура картой со статусом APPROVED**

1. В поле "Номер карты" ввести номер карты со статусом APPROVED 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova) 	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат**: в правом верхнем углу должно появиться сообщение "Успешно Операция одобрена банком"

---

**Отказ в покупке тура при оплате картой со статусом DECLINED**

1. В поле "Номер карты" ввести номер карты со статусом DECLINED 4444 4444 4444 4442
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например,11)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 24)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 523)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат**: в правом верхнем углу должно появиться сообщение "Ошибка! Банк отказал в проведении операции"

---

**Направление заявки с указанием имени через дефис**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести Anna-Mariya Petrova
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в правом верхнем углу должно появиться сообщение "Успешно Операция одобрена банком"

---

**Направление заявки с указанием фамилии через дефис**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести Olga Petrova-Mironova
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в правом верхнем углу должно появиться сообщение "Успешно Операция одобрена банком"

---
__Sad Path (негативные сценарии)__

---

Проверяем ввод невалидных данных в поля формы на покупку тура

Для выполнения сценариев на главной странице сервиса необходимо:

* для проверки оплаты тура по дебетовой карте нажать на кнопку "Купить"

* для проверки оплаты тура с помощью кредитных средств нажать на кнопку "Купить в кредит"

---
**1. Поле "Номер карты"**

---

**Направление заявки с незаполненным полем**

1. Оставить поле "Номер карты" пустым
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Номер карты" должно появиться сообщение: "Поле обязательно для заполнения"

---
**Направление заявки с недостаточным количеством цифр в номере карты**

1. В поле "Номер карты" ввести номер 4444 4444 4444 444
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Номер карты" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с несуществующим номером карты**
1. В поле "Номер карты" ввести номер 4444 4444 4444 1234
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)	
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат**: в правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"

---

**2. Поле "Месяц"**

---

**Направление заявки с незаполненным полем**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. Поле "Месяц" оставить пустым
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Месяц" должно появиться сообщение: "Поле обязательно для заполнения"

---
**Направление заявки с нулевыми значениями в поле**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести 00
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Месяц" должно появиться сообщение: "Неверно указан срок действия карты"

---
**Направление заявки с указанием месяца больше 12**

1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести 14
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Месяц" должно появиться сообщение: "Неверно указан срок действия карты"

---
**Направление заявки с указанием 1 цифры в поле**

1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести 1
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Месяц" должно появиться сообщение: "Неверно указан срок действия карты"

---

**3.Поле "Год"**

---

**Направление заявки с незаполненным полем**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. Поле "Год" оставить пустым
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Год" должно появиться сообщение: "Поле обязательно для заполнения"

---
**Направление заявки с указанием карты с истекшим сроком действия**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести 20
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Год" должно появиться сообщение: "Истёк срок действия карты"

---

**Направление заявки с указанием в поле нулевых значений**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести 00
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Год" должно появиться сообщение: "Истёк срок действия карты"

---
**Направление заявки с указанием в поле цифр намного позднее текущего года**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести 30
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Год" должно появиться сообщение: "Неверно указан срок действия карты"

---
**Направление заявки с указанием в поле 1 цифры**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести 2
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Olga Petrova)	
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Год" должно появиться сообщение: "Неверный формат"

---
**4. Поле "Владелец"**

---

**Направление заявки с незаполненным полем**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. Поле "Владелец" оставить пустым
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Поле обязательно для заполнения"

---
**Направление заявки с указанием в поле только фамилии**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести Petrova
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с указанием в поле фамилии и имени на кириллице**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести Ольга Петрова
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с указанием в поле цифр**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести 12345678
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с указанием в поле спецсимволов**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести %%%$$$
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с указанием в поле большого количества проблелов между фамилией и именем**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести Olga(ввести 5 пробелов)Petrova
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---

**Направление заявки с указанием в поле большого количества букв**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" ввести PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP
5. В поле "CVC/CVV" ввести любое целое трехзначное число (например, 829)
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "Владелец" должно появиться сообщение: "Неверный формат"

---
**5. Поле "CVC/CVV"**

---

**Направление заявки с пустым полем**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Petrova Olga)	
5. Поле "CVC/CVV" оставить пустым
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "CVC/CVV" должно появиться сообщение: "Поле обязательно для заполнения"

---
**Направление заявки с указанием в поле 2 цифр**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Petrova Olga)	
5. В поле "CVC/CVV" ввести 82
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "CVC/CVV" должно появиться сообщение: "Неверный формат"

**Направление заявки с указанием в поле нулевых значений**
1. В поле "Номер карты" ввести номер 4444 4444 4444 4441
2. В поле "Месяц" ввести любой месяц в формате двухзначного числа (например, 08)
3. В поле "Год" ввести любой год в формате двухзначного числа (например, 23)
4. В поле "Владелец" с помощью библиотеки faker ввести имя и фамилию латиницей (например, Petrova Olga)	
5. В поле "CVC/CVV" ввести 000
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** в поле "CVC/CVV" должно появиться сообщение: "Неверный формат"

---
**Направление заявки с пустыми полями**

1. Оставить все поля формы незаполненными
2. Нажать кнопку "Продолжить"

**Ожидаемый результат:** во всех полях формы должно появиться сообщение: "Поле обязательно для заполнения"

---
## *Тестирование API*
---

Необходимо проверить через API статусы банковских карт в базах данных

Данные для валидной карты со статусом *APPROVED*:

* Номер карты = 4444 4444 4444 4441
* Месяц = 08
* Год = 23
* Владелец = Petrova Olga
* CVC/CVV = 829

Данные для невалидной карты со статусом *DECLINED*:

* Номер карты = 4444 4444 4444 4442
* Месяц = 11
* Год = 24
* Владелец = Petrov Sergey
* CVC/CVV = 523


**Сценарии тестирования:**
1. При оплате по карте 4444 4444 4444 4441 (обращение к URL-адресу http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты APPROVED

2. При отправке заявки на кредит по карте 4444 4444 4444 4441 (обращение к URL-адресу http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты APPROVED

3. При оплате по карте 4444 4444 4444 4442 (обращение к URL-адресу http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты DECLINED

4. При отправке заявки на кредит по карте 4444 4444 4444 4442 (обращение к URL-адресу http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты DECLINED
---
## **2. Перечень используемых инструментов с обоснованием выбора**
* IntelliJ IDEA - среда разработки для различных языков, совместимая с различными инструментами и возможностью их комбинирования и настройки под конкретный случай
* Java 11 - универсальный язык, позволяющий работать на всех ОС и различном оборудовании. По статистике, Java является одним из самых популярных языков программирования в мире, это широко распространенный язык, на котором написано огромное множество сайтов, приложений
* Gradle - система автоматической сборки проекта. По сравнению с Maven, в Gradle проще подключать зависимости, меньше кода, система имеет множество хороших плагинов
* Docker - для развертывания виртуальных контейнеров и запуска в них баз данных MySQL и PostgreSQL, а также сервисов банка на NodeJS 
* JUnit5 - один из наиболее популярных тестовых фреймворков на данный момент, обладающий всем нужным функционалом и аннотациями
* Selenide - фреймворк для автоматизированного тестирования веб-приложений, простой в настройке и удобный в использовании
* Faker - генерация недостающих данных для тестирования, не нужно самостоятельно задумываться о придумывании данных, Faker их генерирует по множеству категорий
* Lombok - плагин для создания аннотаций, заменяющих значительное количество однообразных конструкторов, getters/setters и пр.
* Allure Report - фрейворк для создания визуальной картины выполнения тестов. Данная система репортинга обладает значительно большим функционалом по сравнению со стандартным отчетом Gradle
* Git - система контроля версий, позволяющая разработчикам отслеживать изменения в файлах и работать совместно с другими разработчиками
* GitHub - сервис онлайн-хостинга репозиториев
 ---
## **3. Перечень и описание возможных рисков при автоматизации**
* Сложность в настройке тестовой инфраструктуры (проблемы с одновременным использованием двух СУБД - MySql и Postgres, сложности в настройке симулятора банковских сервисов)
* Некорректность тестовых данных при работе с Faker
* Сложность нахождения необходимых css-селекторов, необходимость актуализаци тестов в случае изменения структуры страницы
* Риск выявления в ходе тестирования необходимости реализации дополнительных сценариев, что увеличивает время на тестирование и его стоимость
* Дополнительная нагрузка на веб-сервис
* Отсутствие информации о планируемом поведении системы в различных ситуациях
 ---
## **4. Интервальная оценка с учётом рисков (в часах)**
* Подготовка тестовой инфраструктуры - 16 часов
* Написание автотестов, тестирование и отладка автотестов - 72 часа
* Подготовка отчётных документов по итогам автоматизированного тестирования - 8 часов
* Подготовка отчётных документов по итогам автоматизации - 8 часов
* Резерв на решение непредвиденных ситуаций - 16 часов
---
## **5. План сдачи работ**
* Написание и выполнение тестов - 8 рабочих дней после утверждения плана автоматизации тестирования
* Подготовка отчётных документов по итогам автоматизированного тестирования - 3 рабочих дня
* Подготовка отчётных документов по итогам автоматизации - 3 рабочих для после проведения всех работ